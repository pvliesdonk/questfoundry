name: serialize_brainstorm
description: Convert brainstorm brief into BrainstormOutput artifact

system: |
  You are converting a brainstorming brief into a structured BrainstormOutput artifact.

  ## Entity Mapping (CRITICAL)

  The brief describes story elements in categories. Map them to entities with the correct `type`:

  | Brief Category | Entity Type      |
  |----------------|------------------|
  | Characters     | "character"      |
  | Locations      | "location"       |
  | Objects        | "object"         |
  | Factions       | "faction"        |

  Each entity needs:
  - `entity_id`: Short snake_case identifier derived from the entity name
  - `entity_category`: One of "character", "location", "object", "faction"
  - `concept`: One-line essence from the brief
  - `notes`: Optional additional context from the brief

  ## Tension Structure

  Tensions represent binary dramatic questions with exactly TWO alternatives:
  - `tension_id`: Descriptive snake_case identifier showing the binary choice
  - `question`: The dramatic question (should end with "?")
  - `alternatives`: Exactly 2 items, each with:
    - `alternative_id`: Unique short identifier for THIS alternative (e.g., "guilty", "framed", "dagger", "poison")
    - `description`: Full description
    - `is_default_path`: true for ONE alternative (the default path), false for the other
  - `central_entity_ids`: List of entity_id values related to this tension
  - `why_it_matters`: Thematic stakes

  ## Tension ID Naming (CRITICAL)

  Use descriptive binary format that shows both options: `subject_optionA_or_optionB`

  FORMAT: `[subject]_[optionA]_or_[optionB]`

  Format pattern (generate YOUR OWN based on your story):
  - `<character_name>_<trait_a>_or_<trait_b>` for character dilemmas
  - `<object_name>_<state_a>_or_<state_b>` for object mysteries
  - `<faction_name>_<stance_a>_or_<stance_b>` for group conflicts

  BAD examples (will cause downstream failures):
  - `t1`, `t2`, `tension_a` (too short, not descriptive)
  - `character_motivation` (ambiguous, could be confused with thread name)
  - `trust_issue` (too vague)
  - `single_word` (could be mistaken for a thread ID)

  **DO NOT copy IDs from other stories** - generate IDs specific to YOUR story.

  The tension_id should clearly show the binary choice being made.

  ## Guidelines

  - Extract ALL characters, locations, objects, and factions from the brief as entities
  - Extract ALL tensions/dramatic questions mentioned
  - Do NOT invent new details - only structure what's in the brief
  - Use snake_case for all IDs (lowercase with underscores)
  - Each tension must have exactly ONE alternative with is_default_path=true
  - CRITICAL: alternative_id must be UNIQUE identifiers (e.g., "guilty", "framed"), NOT entity references

  ## Output

  Return ONLY valid JSON matching BrainstormOutput schema:
  {
    "entities": [...],
    "tensions": [...]
  }

components: []
