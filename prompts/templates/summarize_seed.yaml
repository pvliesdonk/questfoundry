name: summarize_seed
description: Summarize seed discussion into structured story foundation

system: |
  You are summarizing a story architecture discussion into structured output.
  This is the SEED stage output - the committed foundation for the story.

  ## Brainstorm Reference
  {brainstorm_context}

  ## CRITICAL: Complete Coverage Required

  This output MUST include a decision for EVERY entity and tension from brainstorm.
  Missing items will cause validation failure. Use the checklists below.

  ## Entity Checklist (ALL {entity_count} MUST BE COVERED)

  {entity_checklist}

  ## Your Task
  Condense the discussion into a complete story structure:

  ### Entity Decisions (EXACTLY {entity_count} required)
  For each entity listed in the checklist above:
  - id: the EXACT entity ID from the checklist (copy it precisely)
  - disposition: "retained" or "cut"

  WARNING: Do NOT skip any entity. The serializer will FAIL if any entity is missing.
  Copy each ID exactly as shown in the checklist.

  ### Tension Decisions (ALL {tension_count} required)
  For each tension from brainstorm:
  - tension_id: the tension ID from brainstorm
  - explored: list of alternative IDs that become threads (MUST include canonical)
  - implicit: list of alternative IDs NOT explored (context for shadows)

  ### Threads
  For each explored alternative:
  - id: unique thread identifier
  - name: human-readable name
  - tension_id: which tension this explores
  - alternative_id: which alternative this explores
  - shadows: IDs of unexplored alternatives (for FILL context)
  - tier: "major" or "minor"
  - description: what this thread is about
  - consequences: list of consequence IDs

  ### Consequences
  For each thread's narrative consequences:
  - id: unique consequence identifier
  - thread_id: which thread this belongs to
  - description: what happens narratively
  - ripples: story effects this implies

  ### Initial Beats (2-4 per thread) - CRITICAL
  Create 2-4 initial beats PER THREAD (not just 1 total).
  With 3 threads, expect 6-12 beats. Each thread needs multiple entry points.

  **This is non-negotiable**: If you have 3 threads, you need at least 6 beats.

  For each opening beat:
  - id: unique beat identifier
  - summary: what happens in this beat
  - threads: list of thread IDs this beat serves
  - tension_impacts: how this beat affects tensions
    - tension_id: which tension
    - effect: "advances", "reveals", "commits", or "complicates"
    - note: explanation of the impact
  - entities: entity IDs present in this beat (must be retained entities)
  - location: primary location entity ID (must be a retained location)
  - location_alternatives: other valid location IDs for knot flexibility

  **Location Diversity Requirement**: Use at least 2 different locations per thread.
  Don't place all beats in the same location. Vary settings for scene contrast and pacing.

  ### Convergence Sketch
  - convergence_points: where threads should merge
  - residue_notes: what differences persist after convergence

  ## Guidelines
  - Be complete - capture ALL decisions discussed
  - Entity IDs must match those from brainstorm EXACTLY
  - Every tension must have a decision (explored vs implicit)
  - Canonical alternative MUST be in the explored list
  - Every thread needs at least one consequence
  - Use clear, consistent IDs (snake_case recommended)

  ## SELF-VERIFICATION CHECKLIST (MANDATORY)

  Before outputting, count and verify each of these:

  | Check | Expected | Your Count |
  |-------|----------|------------|
  | Entity decisions | {entity_count} | ___ |
  | Tension decisions | {tension_count} | ___ |
  | Beats per thread | 2-4 each | ___ |
  | Locations per thread | 2+ different | ___ |

  If your entity count does NOT equal {entity_count}, STOP and add the missing entities.
  Go back to the Entity Checklist and ensure every single ID appears in your output.

  ## Output Format
  Provide a structured summary with all six sections clearly labeled.
  Use consistent formatting so the serialize phase can extract it accurately.

components: []
