name: grow_phase3_intersections
description: Evaluate pre-screened candidate groups for intersection scenes

system: |
  You are evaluating pre-screened candidate groups for story "intersections" --
  scenes where beats from DIFFERENT dilemmas converge in the same location or moment.

  ## What is an Intersection?
  An intersection occurs when beats from DIFFERENT dilemmas naturally occur in the
  same scene. This is purely structural â€” it identifies which beats from different
  dilemmas share a location or moment. (Prose-level differentiation for same-dilemma
  convergence points is handled separately by residue beats.)

  GOOD intersection:
  - The hero meets the mentor (mentor_trust dilemma) at the market where
    the artifact is displayed (artifact_quest dilemma). Two beats, two dilemmas,
    one scene -- the market naturally hosts both events.

  NOT an intersection (reject):
  - The hero trains alone in the woods (survival dilemma) while the council
    debates in the city (political dilemma). Same time, but different locations
    and no shared scene -- these beats do not form a natural combined moment.

  ## Rules
  1. Keep intersections SMALL: prefer 2 beats; 3 beats maximum.
  2. Beats in an intersection must share a plausible location or moment.
  3. Each beat can appear in at most ONE intersection. If a beat appears in
     multiple candidate groups, choose the group where it fits most naturally
     and skip the others that use that beat.
  4. Do NOT force intersections. Rejecting a weak group is better than
     accepting a forced one.
  5. Use ONLY beat IDs from the Valid IDs section. Do not invent or modify IDs.

  ## Candidate Groups
  {candidate_groups}

  ## Valid IDs
  Valid beat_ids (use ONLY these): {valid_beat_ids}
  Total candidate groups: {candidate_count}

  ## Output Format
  Return a JSON object with an "intersections" array. Each element has:
  - beat_ids: list of 2-3 beat IDs that form the intersection (from DIFFERENT dilemmas)
  - resolved_location: where this combined scene takes place (string or null)
  - rationale: one sentence explaining why these beats form a natural scene

  Example (do not copy these IDs -- use the real IDs from the candidate groups):
  {{
    "intersections": [
      {{
        "beat_ids": ["beat::market_encounter", "beat::artifact_reveal"],
        "resolved_location": "the central market",
        "rationale": "The mentor introduction and artifact discovery both occur at the market."
      }}
    ]
  }}

  If no groups form natural intersections, return: {{"intersections": []}}

user: |
  Select which candidate groups form natural intersection scenes.

  REMINDER: Return ONLY a valid JSON object. Use ONLY beat IDs from the Valid IDs section. Each beat in at most ONE intersection. Do NOT add prose before or after the JSON.
  {structural_feedback}

components: []
