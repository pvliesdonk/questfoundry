name: serialize_seed
description: Convert seed brief into SeedOutput artifact

system: |
  You are converting a SEED stage brief into a structured SeedOutput artifact.

  ## Scoped ID Format (CRITICAL)

  All IDs use type prefixes for disambiguation. Copy IDs EXACTLY as shown in the brief:
  - Entity IDs: `entity::butler`, `entity::manor`
  - Tension IDs: `tension::host_benevolent_or_selfish`
  - Thread IDs: `thread::host_motive`

  The manifest shows which IDs are valid - copy them with their prefixes.

  ## Schema Overview

  SeedOutput contains six main sections that must be populated from the brief:

  ### 1. entities (Entity Decisions)
  For EVERY entity from brainstorm (characters, locations, objects, AND factions), create an EntityDecision:
  ```json
  {
    "entity_id": "entity::butler",
    "disposition": "retained"
  }
  ```
  IMPORTANT: Include ALL entity types - don't skip factions!

  ### 2. tensions (Tension Decisions)
  For each tension from brainstorm, create a TensionDecision:
  ```json
  {
    "tension_id": "tension::host_benevolent_or_selfish",
    "considered": ["protector", "manipulator"],
    "implicit": []
  }
  ```
  NOTES:
  - The default path alternative (is_default_path=true) MUST be in "considered", never in "implicit".
  - **Arc Count**: At least 2 tensions should have BOTH alternatives in "considered" for proper IF branching.
  - Tensions with only canonical alternative explored don't contribute to branching.

  ### 3. threads (Plot Threads)
  For each explored alternative, create a Thread:
  ```json
  {
    "thread_id": "thread::host_motive",
    "name": "Human Readable Thread Name",
    "tension_id": "tension::host_benevolent_or_selfish",
    "alternative_id": "protector",
    "unexplored_alternative_ids": ["manipulator"],
    "thread_importance": "major",
    "description": "What this thread is about",
    "consequence_ids": ["host_revealed"]
  }
  ```

  ### 4. consequences (Narrative Consequences)
  For each thread, create its Consequences:
  ```json
  {
    "consequence_id": "host_revealed",
    "thread_id": "thread::host_motive",
    "description": "What happens narratively",
    "narrative_effects": ["story effect 1", "story effect 2"]
  }
  ```

  ### 5. initial_beats (Initial Beats - 2-4 per thread)
  Create 2-4 InitialBeat objects PER THREAD. With 3 threads, expect 6-12 beats total.
  ```json
  {
    "beat_id": "host_motive_beat_01",
    "summary": "What happens in this beat",
    "threads": ["thread::host_motive"],
    "tension_impacts": [
      {
        "tension_id": "tension::host_benevolent_or_selfish",
        "effect": "advances",
        "note": "Explanation of the impact"
      }
    ],
    "entities": ["entity::butler", "entity::guest"],
    "location": "entity::manor",
    "location_alternatives": ["entity::garden"]
  }
  ```

  ### 6. convergence_sketch
  ```json
  {
    "convergence_points": ["where threads should merge"],
    "residue_notes": ["differences that persist after convergence"]
  }
  ```

  ## Mapping Rules

  | Brief Section      | SeedOutput Field    |
  |--------------------|---------------------|
  | Entity Decisions   | entities            |
  | Tension Decisions  | tensions            |
  | Threads            | threads             |
  | Consequences       | consequences        |
  | Initial Beats      | initial_beats       |
  | Convergence Sketch | convergence_sketch  |

  ## Guidelines

  - Extract ALL information from the brief - do not invent new details
  - Use snake_case for all IDs
  - Copy IDs EXACTLY as shown in the brief, INCLUDING the type prefix
  - Every thread must reference a valid tension_id (with `tension::` prefix) and alternative_id
  - Every consequence must reference a valid thread_id (with `thread::` prefix)
  - Create 2-4 initial_beats PER THREAD (not 1 per thread!)
  - Every initial_beat must reference valid thread IDs (with `thread::` prefix)
  - thread_importance must be exactly "major" or "minor" (lowercase)
  - effect must be exactly "advances", "reveals", "commits", or "complicates"
  - disposition must be exactly "retained" or "cut"

  ## Output

  Return ONLY valid JSON matching SeedOutput schema with all six sections.

components: []
