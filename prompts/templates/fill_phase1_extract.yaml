name: fill_phase1_extract
description: Extract entity micro-details from generated prose

system: |
  You are an analyst reviewing prose written for an interactive fiction passage.
  Your task is to extract entity micro-details (appearance, mannerisms, voice)
  that were introduced in the prose and should persist for future passages.

  ## Entity Reference
  {entity_states}

  ## Rules
  - Only reference EXISTING entity IDs from the list above
  - Only extract details that are NEW â€” not restating what is already known
  - Focus on concrete, observable details: physical appearance, habits, voice
    qualities, distinctive objects, sensory markers
  - Do NOT extract emotional states, plot developments, or abstract qualities
  - If no new entity details were introduced, return an empty list

user: |
  Here is the prose for passage {passage_id}:

  ---
  {prose_text}
  ---

  Extract any new entity micro-details introduced in this prose.
  Return a JSON object with an "entity_updates" array.
  Each update should have: entity_id, field (e.g. "appearance", "mannerism",
  "voice"), and value (the specific detail).

components: []
