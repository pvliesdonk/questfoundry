{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://questfoundry.liesdonk.nl/schemas/research_memo.schema.json",
  "title": "Research Memo",
  "description": "Generated from 02-dictionary/artifacts/research_memo_ENRICHED.md. Answers the smallest useful question with sourced evidence, posture, neutral phrasing, and creative implications while keeping player surfaces safe.",
  "type": "object",
  "properties": {
    "title": {
      "type": "string",
      "description": "Short topic or question name.",
      "minLength": 3,
      "maxLength": 120
    },
    "tu": {
      "type": "string",
      "description": "Reference TU ID in format TU-YYYY-MM-DD-<role><seq>.",
      "pattern": "^TU-\\d{4}-\\d{2}-\\d{2}-[A-Z]{2,4}\\d{2}$"
    },
    "edited": {
      "$ref": "#/definitions/date_string",
      "description": "Date the memo was last edited."
    },
    "owner": {
      "type": "string",
      "description": "Role maintaining the memo; fixed to Researcher.",
      "enum": [
        "Researcher"
      ]
    },
    "slice": {
      "type": "string",
      "description": "Player-safe slice description (1-2 lines).",
      "minLength": 10,
      "maxLength": 240
    },
    "stakeholders": {
      "type": "array",
      "description": "Roles that will consume this research.",
      "items": {
        "$ref": "#/definitions/role_name"
      },
      "minItems": 1,
      "uniqueItems": true
    },
    "question": {
      "type": "string",
      "description": "One-line question framed in surface language.",
      "minLength": 10,
      "maxLength": 200
    },
    "where_it_appears": {
      "type": "string",
      "description": "Location reference (manuscript path, codex entry, or caption).",
      "minLength": 5,
      "maxLength": 200
    },
    "why_it_matters": {
      "type": "string",
      "description": "Brief rationale such as gate fairness, safety, terminology, or tone.",
      "minLength": 5,
      "maxLength": 200
    },
    "short_answer": {
      "type": "string",
      "description": "Decision-ready plain-language summary (2-5 lines).",
      "minLength": 20,
      "maxLength": 600
    },
    "evidence_hot": {
      "type": "array",
      "description": "Hot evidence list citing 2-5 sources with relevance summaries.",
      "items": {
        "type": "string",
        "minLength": 10,
        "maxLength": 250
      },
      "minItems": 2,
      "maxItems": 5
    },
    "posture": {
      "type": "string",
      "description": "Research certainty level per posture taxonomy.",
      "enum": [
        "corroborated",
        "plausible",
        "disputed",
        "uncorroborated:low",
        "uncorroborated:medium",
        "uncorroborated:high"
      ]
    },
    "caveats": {
      "type": "array",
      "description": "Optional caveats covering gaps, contention, or edge cases.",
      "items": {
        "type": "string",
        "minLength": 5,
        "maxLength": 200
      }
    },
    "neutral_phrasing": {
      "type": "array",
      "description": "Player-safe surface lines owners can drop into Cold.",
      "items": {
        "type": "string",
        "minLength": 5,
        "maxLength": 200
      },
      "minItems": 1,
      "maxItems": 3
    },
    "risks_and_mitigations": {
      "type": "string",
      "description": "Safety, sensitivity, cultural, or legal considerations with mitigations.",
      "minLength": 20,
      "maxLength": 600
    },
    "creative_implications": {
      "type": "array",
      "description": "Actionable implications broken down by creative roles.",
      "items": {
        "type": "string",
        "minLength": 5,
        "maxLength": 200
      },
      "minItems": 1
    },
    "hooks_filed": {
      "type": "array",
      "description": "Optional follow-up hooks generated by this memo.",
      "items": {
        "type": "string",
        "pattern": "^hook://[a-z0-9\\-]+/[a-z0-9\\-]+.*$"
      }
    },
    "done_checklist": {
      "type": "array",
      "description": "Completion checklist items that must be satisfied before merge.",
      "items": {
        "type": "string",
        "minLength": 5,
        "maxLength": 200
      },
      "minItems": 6,
      "maxItems": 6
    }
  },
  "required": [
    "title",
    "tu",
    "edited",
    "owner",
    "slice",
    "stakeholders",
    "question",
    "where_it_appears",
    "why_it_matters",
    "short_answer",
    "evidence_hot",
    "posture",
    "neutral_phrasing",
    "risks_and_mitigations",
    "creative_implications",
    "done_checklist"
  ],
  "definitions": {
    "role_name": {
      "type": "string",
      "description": "QuestFoundry role abbreviation (see 02-dictionary/role_abbreviations.md)",
      "enum": [
        "SR",
        "GK",
        "PW",
        "SS",
        "ST",
        "LW",
        "CC",
        "AD",
        "IL",
        "AuD",
        "AuP",
        "TR",
        "BB",
        "PN",
        "RS"
      ]
    },
    "date_string": {
      "type": "string",
      "description": "Date in YYYY-MM-DD format",
      "format": "date",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
    },
    "quality_bar": {
      "type": "string",
      "description": "One of 8 Quality Bars (see taxonomies.md ยง5)",
      "enum": [
        "Integrity",
        "Reachability",
        "Nonlinearity",
        "Gateways",
        "Style",
        "Determinism",
        "Presentation",
        "Accessibility"
      ]
    },
    "loop_name": {
      "type": "string",
      "description": "One of 13 TU loop types (see taxonomies.md ยง3 and loop_names.md)",
      "enum": [
        "Story Spark",
        "Hook Harvest",
        "Lore Deepening",
        "Codex Expansion",
        "Style Tune-up",
        "Art Touch-up",
        "Audio Pass",
        "Translation Pass",
        "Binding Run",
        "Narration Dry-Run",
        "Gatecheck",
        "Post-Mortem",
        "Archive Snapshot"
      ]
    },
    "deferral_tag": {
      "type": "string",
      "description": "Deferral type for dormant roles (see taxonomies.md ยง7)",
      "enum": [
        "deferred:art",
        "deferred:audio",
        "deferred:translation",
        "deferred:research"
      ]
    }
  }
}
