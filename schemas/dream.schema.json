{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://questfoundry.dev/schemas/dream.schema.json",
  "title": "DREAM Artifact",
  "description": "Creative vision and constraints for the story",
  "type": "object",
  "required": ["type", "version", "genre", "tone", "audience", "themes"],
  "properties": {
    "type": {
      "const": "dream",
      "description": "Artifact type identifier"
    },
    "version": {
      "type": "integer",
      "minimum": 1,
      "default": 1,
      "description": "Schema version number"
    },
    "genre": {
      "type": "string",
      "minLength": 1,
      "description": "Primary genre"
    },
    "subgenre": {
      "type": "string",
      "minLength": 1,
      "description": "Optional genre refinement"
    },
    "tone": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 1
      },
      "minItems": 1,
      "description": "Tone descriptors"
    },
    "audience": {
      "type": "string",
      "minLength": 1,
      "description": "Target audience (e.g., adult, young adult, all ages, mature)"
    },
    "themes": {
      "type": "array",
      "items": {
        "type": "string",
        "minLength": 1
      },
      "minItems": 1,
      "description": "Thematic elements"
    },
    "style_notes": {
      "type": "string",
      "minLength": 1,
      "description": "Style guidance"
    },
    "scope": {
      "type": "object",
      "required": ["target_word_count", "estimated_passages"],
      "properties": {
        "target_word_count": {
          "type": "integer",
          "minimum": 1000,
          "description": "Approximate final length"
        },
        "estimated_passages": {
          "type": "integer",
          "minimum": 5,
          "description": "Target scene count"
        },
        "branching_depth": {
          "type": "string",
          "minLength": 1,
          "default": "moderate",
          "description": "Branching complexity (e.g., light, moderate, heavy, extensive)"
        },
        "estimated_playtime_minutes": {
          "type": "integer",
          "minimum": 1,
          "description": "Target reading time"
        }
      }
    },
    "content_notes": {
      "type": "object",
      "properties": {
        "includes": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 1
          },
          "description": "Content included"
        },
        "excludes": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 1
          },
          "description": "Content excluded"
        }
      }
    }
  }
}
